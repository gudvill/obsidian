JSON Web Token - открытый стандарт для создания токенов доступа, основанный на формате JSON. Как правило, его используют в передачи данных для [аутентификации](Аутентификация) или [авторизации](Аутентификация) в клиент-серверных приложениях.

JWT разработали, чтобы усовершенствовать традиционные методы аутентификации, которые использовали сессионные токены.

В JWT все данные, которые нужны сверху, хранятся на клиенте.
### Составляющие токена:

###### `header.payload.signature`

- **header** (заголовок) - указывает тип токена и алгоритм подписи;
- **payload** (полезная нагрузка) - данные, которые несут в себе информацию:
	- iss - издатель токена;
	- sub - назначение токена;
	- aud - аудитория, для которой предназначен токен;
	- exp - срок действия токена;
	- hbf - время, до которого токен недействителен;
	- iat - время создания токена;
	- jti - уникальный идентификатор токена.
	Клеймы (необязательно):
	- user_id;
	- role;
	- name;
	- email.
- **signature** (криптографическая подпись) - секретный ключ, обеспечивает целостность токена.
### Порядок создания JWT

1. кодирование заголовка и полезной нагрузки (алгоритм base64url);
2. объединение закодированных частей через ".";
3. генерация подписи (алгоритм HMAC-SHA256). Добавление к исходной строке через ".".
### Преимущества

- самодостаточность. В отличие от Session Autentication, где каждый запрос требует проверки в [[база данных]] или памяти сервера, JWT содержит всю информацию внутри себя и может быть верифицирован локально на любом сервере без доп. запросов;
- кроссплатформенность;
- гибкость.

JWT не поддерживает отзыв токенов по умолчанию и может быть опасен при утечке, поэтому требует осторожного применения.
### Хранение JWT:

1. веб-хранилище (localStorage/sessionStorage);
2. cookie (минусы: уязвим для CSRF, cookie можно подделать, файлы cookie работают в поддоменах).
### Взаимодействие между клиентским JWT и сервером:

1. клиент выполняет вход, используя учётные данные и отправляя запрос на сервер;
2. сервер проверяет эти учётные данные, и если они действительны - сервер генерирует JWT и отправляет его обратно клиенту. При генерации токена сервер ставит подпись секретным ключом, который хранится только в веб-приложении;
3. клиент сохраняет JWT, обычно в локальном хранилище, и включает его в заголовок каждого последующего запроса (HTTP);
4. сервер, получая эти запросы, проверяет JWT. Если он действителен - клиент аутентифицирован и авторизован.
### Access и Refresh токены

**Access Token** - токен доступа к информации, обычно имеет время жизни несколько минут.
**Refresh Token** - токен обновления, по которому можно получить новую пару Access и Refresh, срок жизни - несколько дней.
### Передача JWT:

1. через HTTP-заголовок Authorization со схемой аутентификации Bearer;
2. в cookie (HTTP Only);
3. через параметры URL или Post-запросы.
### [[Хеш-функции]]

Хеш-функции в SQL используются для хеширования. **Хеширование** - преобразования входных данных произвольной длины в фиксированной строку определённой длины.
Случаи использования:
- хранение паролей;
- целостность данных.
